---
id: docs_22
title: BBFT共识
sidebar_label: BBFT共识
---

**BBFT是一种基于实用拜占庭容错（PBFT）的衍生共识。**

共识过程示意(假设一个由7个节点组成的单层拓扑共识网络）:

![2.png](https://i.loli.net/2019/12/06/eQnYAjf7lkK8G91.png)

**S0,S1：** 超级共识节点。选举可以采用网络拓扑延迟和资产抵押结合的方式，目的是在减少节点作恶的可能性的同时尽量减少网络的整体延时。作为普通节点和领导节点之间的中继，对信息做整合和转发。
**L：** 领导节点。选举可以采用普通的轮询方式在超级节点中选出。
**T0：** L发送交易和提案（签名）到S0和S1
**T1：** S0和S1转发交易和提案给同属共识节点
**T2：** 共识节点验证交易并发送提案（签名）给 S0 和 S1
**T3：** S0 和 S1 对提案进行多签整合并相互发送多签提案
**T4：** S0 和 S1 发送多签提案给同属共识节点

在T3，S0已经获取超过2/3的节点提案，同样在T4，S1获取超过2/3的节点提案，其他节点在T5获取所有节点提案。

**具有以下特性：**

**配置性**
采用模块化，可插拔设计，按需配置，并在一定程度上保证对新技术的兼容。

**适应性**
在BBFT中，共识节点维护当前网络拓扑，按最短路径原理相近的节点采取优先通信，对通信的聚合可以进一步降低延时。同时领导节点的角色被弱化，类似与DBFT，当共识节点拿到超过2/3票数的情况下就可以做出判定，从而在领导节点的通信受到阻塞的情况下也不会对整个网络的决策产生巨大影响。

**扩展性**
BBFT中对消息的有效聚合可以有效的减少消息发送的次数，从而保证O(N)的复杂度要求。与网络拓扑相结合，可以把网络分割为多层结构，消息数据可以在同层内有效共享，以多签聚合的形式跨层传播。

**异构性**
分离共识的验证和通信，采取低耦合的共识框架可以进一步提高网络的可靠性和效率。通信模块和用户逻辑相对独立，主要处理网络连接和请求，网络拓扑和最短路径的计算和选择可以在这里完成。由于和用户逻辑无关，通信模块可以以抽象层或者中间件的形式和验证对接。异构带来的优势还体现在用最优的工具做最适合的事。验证和通信允许运行在不同的系统上，不同的操作环境中。针对不同硬件的算力优势，硬件层的安全保证来发挥最大的效能。

**bbft白皮书**：[链接](https://github.com/bystackcom/BBFT-Whitepaper/blob/master/whitepaper.pdf)
